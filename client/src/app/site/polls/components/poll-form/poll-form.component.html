<div class="os-form-card-mobile">
    <form [formGroup]="contentForm">
        <mat-form-field>
            <h2 class="poll-preview--title">
                <input matInput required formControlName="title" [placeholder]="'Title' | translate" />
            </h2>
        </mat-form-field>
    </form>
    <div *ngIf="data && data.state > 1" class="poll-preview-meta-info">
        <span class="short-description" *ngFor="let value of pollValues">
            <span class="short-description--label subtitle" translate>
                {{ value[0] }}
            </span>
            <span class="short-description--value" translate>
                {{ value[1] }}
            </span>
        </span>
    </div>
    <form [formGroup]="contentForm" class="poll-preview--meta-info-form">
        <ng-container *ngIf="!data || !data.state || data.state === 1">
            <mat-form-field *ngIf="pollService.isElectronicVotingEnabled">
                <mat-select [placeholder]="'Poll type' | translate" formControlName="type" required>
                    <mat-option *ngFor="let option of pollTypes | keyvalue" [value]="option.key">
                        {{ option.value | translate }}
                    </mat-option>
                </mat-select>
                <mat-error translate>This field is required</mat-error>
            </mat-form-field>
            <mat-form-field *ngIf="contentForm.get('type').value && contentForm.get('type').value != 'analog'">
                <os-search-value-selector
                    formControlName="groups_id"
                    [multiple]="true"
                    [showChips]="false"
                    [includeNone]="false"
                    [placeholder]="'Entitled to vote' | translate"
                    [inputListValues]="groupObservable"
                ></os-search-value-selector>
            </mat-form-field>
            <mat-form-field>
                <mat-select [placeholder]="'Poll method' | translate" formControlName="pollmethod" required>
                    <mat-option *ngFor="let option of pollMethods | keyvalue" [value]="option.key">
                        {{ option.value }}
                    </mat-option>
                </mat-select>
                <mat-error translate>This field is required</mat-error>
            </mat-form-field>
        </ng-container>

        <mat-form-field>
            <mat-select placeholder="{{ '100% base' | translate }}" formControlName="onehundred_percent_base" required>
                <ng-container *ngFor="let option of percentBases | keyvalue">
                    <mat-option *ngIf="isValidPercentBaseWithMethod(option.key)" [value]="option.key">
                        {{ option.value | translate }}
                    </mat-option>
                </ng-container>
            </mat-select>
        </mat-form-field>
        <mat-form-field>
            <mat-select placeholder="{{ 'Majority' | translate }}" formControlName="majority_method" required>
                <mat-option *ngFor="let option of majorityMethods | keyvalue" [value]="option.key">
                    {{ option.value | translate }}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </form>
</div>
