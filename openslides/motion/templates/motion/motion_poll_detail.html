{% extends 'base.html' %}

{% load tags %}
{% load i18n %}
{% load staticfiles %}
{% load humanize %}

{% block title %}
    {% trans "Motion" %} {{ motion.identifier }}, {{ poll }} â€“ {{ block.super }}
{% endblock %}

{% block content %}
<h1>
    {{ motion }}
    <br>
    <small>
    {% trans "Motion" %} {{ motion.identifier }},
    {{ poll.poll_number|ordinal|safe }} {% trans "vote" %}
    </small>
    <small class="pull-right">
        <a href="{% url 'motion_detail' motion.id %}" class="btn btn-mini"><i class="icon-chevron-left"></i> {% trans "Back to motion" %}</a>
        <!-- activate projector -->
        {% if perms.projector.can_manage_projector %}
            <a href="{{ motion|absolute_url:'projector' }}" class="activate_link btn {% if motion.is_active_slide %}btn-primary{% endif %} btn-mini" rel="tooltip" data-original-title="{% trans 'Show poll' %}">
                <i class="icon-facetime-video {% if motion.is_active_slide %}icon-white{% endif %}"></i>
            </a>
        {% endif %}
        {% if perms.motion.can_manage_motion %}
            <a class="btn btn-mini" href="{{ poll|absolute_url:'update' }}"
                rel="tooltip" data-original-title="{% trans 'Edit Vote' %}"><i class="icon-pencil"></i></a>
            <a class="btn btn-mini" href="{{ poll|absolute_url:'delete' }}"
                rel="tooltip" data-original-title="{% trans 'Delete Vote' %}"><i class="icon-remove"></i></a>
        {% endif %}
    </small>
</h1>

<!-- activate projector -->
{% if perms.projector.can_manage_projector %}
    <p>
    <a href="{{ poll|absolute_url:'projector' }}" class="activate_link btn {% if poll.is_active_slide %}btn-primary{% endif %} btn-mini">
        <i class="icon-facetime-video {% if poll.is_active_slide %}icon-white{% endif %}"></i> {% trans 'Show vote results' %}
    </a>
    </p>
{% endif %}

{% if poll.has_votes %}
    {% with poll.get_options.0 as option %}
    <div class="well">
        <p><img src="{% static 'img/voting-yes.png' %}" title="{% trans 'Yes' %}"> {% trans 'Yes' %}: <b>{{ option.Yes }}</b></p>
        <p><img src="{% static 'img/voting-no.png' %}" title="{% trans 'No' %}"> {% trans 'No' %}: <b>{{ option.No }}</b></p>
        <p><img src="{% static 'img/voting-abstention.png' %}" title="{% trans 'Abstention' %}"> {% trans 'Abstention' %}: <b>{{ option.Abstain }}</b></p>
        <p><img src="{% static 'img/voting-invalid.png' %}" title="{% trans 'Invalid' %}"> {% trans 'Invalid' %}: <b>{{ poll.print_votesinvalid }}</b></p>
        <hr>
        <p><img src="{% static 'img/voting-total.png' %}" title="{% trans 'Votes cast' %}"> {% trans 'Votes cast' %}: <b>{{ poll.print_votescast }}</b></p>
    </div>
    {% endwith %}
{% else %}
    {% if perms.motion.can_manage_motion %}
        <span class="label label-info">{% trans 'No results' %}</span>
     {% endif %}
{% endif %}

{% endblock %}
